FROM python:alpine

RUN apk add --no-cache build-base

ARG DJANGO_SUPERUSER_USERNAME
ENV DJANGO_SUPERUSER_USERNAME=$DJANGO_SUPERUSER_USERNAME

ARG DJANGO_SUPERUSER_EMAIL
ENV DJANGO_SUPERUSER_EMAIL=$DJANGO_SUPERUSER_EMAIL

ARG DJANGO_SUPERUSER_PASSWORD
ENV DJANGO_SUPERUSER_PASSWORD=$DJANGO_SUPERUSER_PASSWORD

ARG API_HOST
ENV API_HOST=$API_HOST

COPY . /app
WORKDIR /app

RUN chmod +x startup.sh
RUN pip install --no-cache-dir -r requirements.txt

ENTRYPOINT [ "./startup.sh" ]